<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <title>Cadastro</title>
</head>

<body>
    <h2>Cadastro de Usuário</h2>
    <form id="formCadastro">
        <input type="hidden" name="acao" value="cadastrar">
        <input type="text" name="user" placeholder="Digite seu nome" required>
        <button type="submit">Cadastrar</button>
    </form>
    <p id="resposta"></p>

    <script>
        document.getElementById('formCadastro')
            .addEventListener('submit', e => {
                e.preventDefault();
                fetch('backend.php', {
                    method: 'POST',
                    body: new FormData(e.target)})
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('resposta').innerText = data.resposta;
                    }); 
            });
       /*** function getUsuarios() {
            fetch("backend.php?acao=get_usuarios") // backend retorna JSON com array de usuários
                .then(r => r.json())
                .then((entrada) => {
                    var parag = document.querySelector("#resposta");
                    console.log(entrada);
                    parag.textContent = entrada; // mostra os usuários separados por vírgula
                });
        }
        getUsuarios(); // chama a função para carregar os usuários ao abrir a página***/
    </script>
</body>

</html>